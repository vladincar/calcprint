let select=document.querySelectorAll("select");select.forEach(a=>{a.addEventListener("change",()=>mainFunc())});let input=document.querySelectorAll("input");input.forEach(a=>{a.addEventListener("change",()=>mainFunc())});let innerRaskladka=document.querySelector(".innerRaskladka"),width=document.querySelector("#width"),height=document.querySelector("#height"),size=document.querySelector("#size"),price=document.querySelector("#price"),delMin;function mainFunc(){let e=document.querySelector("#paper"),b=document.querySelector("#dencity");document.querySelector("#front");let f=document.querySelector("#back");document.querySelector("#front2");let g=document.querySelector("#back2"),c=document.querySelector("#format"),a=document.querySelector("#ploternaya"),i=document.querySelector("#circulation");e.value.startsWith("\u041E\u0444\u0441\u0435\u0442\u043D\u044B\u0439")?(a.disabled=!0,a.checked=!1,c.checked=!0):a.disabled=!1,e.value.startsWith("\u041E\u0444\u0441\u0435\u0442\u043D\u044B\u0439")?(f.disabled=!1,g.disabled=!1):(f.disabled=!0,f.value="0",g.disabled=!0,g.value="\u0411\u0435\u0437 \u043B\u0430\u043C\u0438\u043D\u0430\u0446\u0438\u0438"),e.value.startsWith("\u041E\u0444\u0441\u0435\u0442\u043D\u044B\u0439")?(b.disabled=!1,"0"===b.value&&(b.value="80")):(b.disabled=!0,b.value="0"),440==width.value&&310==height.value||410==width.value&&290==height.value?size.value="\u04103+":size.value="\u0421\u0432\u043E\u0439 \u0440\u0430\u0437\u043C\u0435\u0440",c.checked?(innerRaskladka.style.width="440px",innerRaskladka.style.height="310px",width.min="35",height.min="35",width.max="440",height.max="310"):a.checked?(innerRaskladka.style.width="410px",innerRaskladka.style.height="290px",width.min="10",height.min="10",width.max="410",height.max="290",enforceMinMax(width),enforceMinMax(height)):a.checked||c.checked||a.click(),parseInt(width.value)<width.min?width.value=width.min:parseInt(height.value)<height.min&&(height.value=height.min);let j=Math.trunc(innerRaskladka.style.width.slice(0,3)/parseInt(width.value)),k=Math.trunc(innerRaskladka.style.height.slice(0,3)/parseInt(height.value)),l=j*k;for(x=0,innerRaskladka.innerHTML="";x<l;x++){let h=document.createElement("div");h.style.width=delMin>parseInt(width.value)?delMin+"px":width.value+"px",h.style.height=delMin>parseInt(height.value)?delMin+"px":height.value+"px",innerRaskladka.appendChild(h)}for(;innerRaskladka.getBoundingClientRect().bottom<innerRaskladka.lastElementChild.getBoundingClientRect().bottom;)innerRaskladka.removeChild(innerRaskladka.lastElementChild);let d=0;select.forEach(a=>{d+=+a.options[a.selectedIndex].getAttribute("calc")}),c.checked?d+=+c.getAttribute("calc"):a.checked&&(d+=+a.getAttribute("calc")),d*=Math.ceil(i.value/innerRaskladka.childElementCount),price.innerHTML=d<100?`100 грн.`:`${d.toFixed(0)} грн.`}function enforceMinMax(a){""!=a.value&&(parseInt(a.value)<parseInt(a.min)&&(delMin=a.min),parseInt(a.value)>parseInt(a.max)&&(a.value=a.max))}mainFunc()
